# 🏛️ 法令検索・法改正支援アプリ 要件定義書（Ver.2）

**作成日**：2025 年 7 月 30 日  
**更新日**：2025 年 8 月 2 日  
**対象ユーザー**：政府法制局職員、各省庁の法令起案担当者、立法支援者

---

## 1. 🎯 背景と目的

日本政府が公開する法令標準 XML をベースとし、法令間の引用関係や改正影響（いわゆる「ハネ改正」）を検出・分析できるアプリケーションを開発する。  
目的は以下のとおり：

- 法令構造の可視化と精密な検索
- 改正影響の分析と通知（間接影響も含む）
- 法令編集業務の効率化（準用・読み替え支援）
- AI による文脈判断を活用した誤りの検出

---

## 2. 🔍 機能要件

### 2.1 法令検索・構造閲覧

- XML（政府標準形式）または Akoma Ntoso に対応
- 条・項・文単位でのナビゲーションと表示
- 検索キーワードに応じた全文検索（Elastic）
- 条文単位の URI（IRI）生成

### 2.2 参照関係の検出と管理

#### A. 「この条文がどの法令を参照しているか」の自動抽出

- 準用・みなす・なお従う等のキーワード・構文の自動検出
- 法令名・条・項の正規化処理
- 抽出結果を JSON / RDF グラフに変換

#### B. GPT-4o による文脈判断と参照の精査

- 抽出された参照が意味的に適切かを AI が判定
- 不適切な参照・曖昧な参照を修正候補付きで出力
- 精査結果に信頼度スコアを付与

#### C. 参照グラフの構築と逆トラバーサル

- グラフ DB（Neo4j / RDF）により、参照元・参照先の構造を記録
- 改正時に「この改正はどの法令・条文に影響を与えるか」を探索
- 読替・準用に関しても関係性を記録

### 2.3 ハネ改正検知モジュール

- 改正法令の新旧対照表から差分検出（文レベル）
- 差分対象が参照されているかを逆トラバースで探索
- GPT-4o による「意味変化の有無」の判定
- 影響を受ける法令・条文を一覧表示・通知可能に

### 2.4 読替・準用支援機能

- 定型句から読み替え対象を自動抽出
- 読替表の自動生成（CSV・Word 出力）
- 読替対象との条文構造比較 UI（差分表示）

### 2.5 告示・省令レジストリ管理

- XML ベースでの管理構造設計
- ベース省令の一覧表示とバージョン管理
- RDF ベースの識別子付与・参照

### 2.6 AI 支援モジュール

- 例文検索（同様な規定を過去法令から抽出）
- 法令執務マニュアルとの連携（検索・要約）
- 法令中の矛盾・不整合の指摘支援（暫定）

---

## 3. 🧠 AI 処理の分離戦略

| フェーズ | モデル                            | 処理対象        | 使用目的                                                                      |
| -------- | --------------------------------- | --------------- | ----------------------------------------------------------------------------- |
| 開発中   | GPT-3.5 / オープン LLM（Mistral） | 抽出と PoC 精査 | コスト抑制と動作確認。Llama‑3‑ELYZA‑JP‑8B（ELYZA 社／東大松尾研チューニング） |
| 本番     | GPT-4o                            | 精査対象のみ    | 意味的判断と信頼性確保                                                        |

→ 処理の段階ごとにモデルを分離し、**検出：軽量モデル / 精査：GPT-4o** のように使い分ける

---

## 4. 💻 技術スタック

| 領域           | 技術スタック                                  |
| -------------- | --------------------------------------------- |
| フロントエンド | React / Next.js                               |
| バックエンド   | Python (FastAPI), Node.js（選択可）           |
| 検索エンジン   | Elasticsearch 8.x                             |
| グラフ DB      | Neo4j / RDF + SPARQL                          |
| LLM            | GPT-3.5-turbo / GPT-4o（OpenAI API）          |
| ストレージ     | S3, PostgreSQL, GCS など                      |
| セキュリティ   | ID ベースアクセス管理、API キー保護、操作ログ |

---

## 5. 📊 コスト構成（更新）

| 項目                                 | 概算費用（初期）      | 備考                   |
| ------------------------------------ | --------------------- | ---------------------- |
| 開発中の LLM 処理（3.5 or ローカル） | 約 1 ～ 5 万円        | 条文単位の抽出検証     |
| 本番精査（GPT-4o）                   | 約 30 ～ 50 万円      | 意味解釈必要な対象のみ |
| Elastic 運用                         | 年間 約 10 ～ 20 万円 | AWS / GCP 上に構築想定 |
| UI・API 開発                         | 約 200 ～ 400 万円    | 表示・比較・編集含む   |
| グラフ DB 運用                       | 約 10 万円～/年       | 条文参照関係に活用     |

---

## 6. 📈 将来拡張

- Akoma Ntoso 準拠形式への完全移行
- 自然言語での法令検索チャット UI
- 改正予定法令の事前影響予測（GPT ＋依存グラフ）

---

## 7. ⚠ 制約・留意点

- 政府提供 XML に含まれない情報（部分参照、意味依存）は AI 推論を併用
- 意図的誤参照や複雑な読替は人間のレビュー支援を前提
- GPT による精査は信頼度付きで表示し、誤判定対策の措置（ログ・編集記録）を実装予定

---

## ✅ 次ステップ（推奨）

1. 改正差分・参照抽出の PoC（100 法令規模）
2. Elastic + GPT-4o 構成の RAG 基盤構築
3. グラフデータモデルの初期設計
4. 省庁・実務家ヒアリングによる UI 要件収集
