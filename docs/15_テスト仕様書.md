# テスト仕様書

**プロジェクト名**: LawFinder  
**作成日**: 2025 年 8 月 3 日  
**バージョン**: 1.0  
**作成者**: QA チーム

## 1. 概要

### 1.1 目的

本書は、LawFinder システムの品質保証のためのテスト仕様を定義する。機能要件、非機能要件の両面から包括的なテストを実施し、高品質なシステムの提供を保証する。

### 1.2 スコープ

- 単体テスト、統合テスト、システムテスト、受入テストの仕様
- Phase 1（静的サイト）および Phase 2（フルスタックアプリ）のテスト
- 自動テストと手動テストの組み合わせ
- パフォーマンステスト、セキュリティテストを含む

### 1.3 テスト方針

- **シフトレフト**: 開発初期段階からテストを実施
- **自動化優先**: 回帰テストは可能な限り自動化
- **リスクベース**: 重要度の高い機能から優先的にテスト
- **継続的テスト**: CI/CD パイプラインに統合

## 2. テストレベルと種類

### 2.1 テストレベル

| レベル         | 説明                         | 実施者      | カバレッジ目標    |
| -------------- | ---------------------------- | ----------- | ----------------- |
| 単体テスト     | 個別モジュール・関数のテスト | 開発者      | 80%以上           |
| 統合テスト     | モジュール間連携のテスト     | 開発者/QA   | 70%以上           |
| システムテスト | システム全体の機能テスト     | QA チーム   | 100%              |
| 受入テスト     | ユーザー要件の確認           | ユーザー/QA | 主要シナリオ 100% |

### 2.2 テスト種類

| 種類                 | 目的                   | 頻度       | 自動化 |
| -------------------- | ---------------------- | ---------- | ------ |
| 機能テスト           | 機能要件の確認         | 継続的     | 80%    |
| 回帰テスト           | 既存機能の保証         | リリース前 | 100%   |
| パフォーマンステスト | 性能要件の確認         | 週次       | 100%   |
| セキュリティテスト   | 脆弱性の検出           | 月次       | 70%    |
| ユーザビリティテスト | 使いやすさの確認       | リリース前 | 0%     |
| 互換性テスト         | ブラウザ・デバイス対応 | リリース前 | 50%    |

## 3. テスト環境

### 3.1 環境構成

| 環境名           | 用途           | URL                  | 特徴                   |
| ---------------- | -------------- | -------------------- | ---------------------- |
| 開発環境         | 開発中のテスト | dev.lawfinder.jp     | 最新コード、不安定     |
| テスト環境       | QA テスト      | test.lawfinder.jp    | 安定版、本番相当データ |
| ステージング環境 | 最終確認       | staging.lawfinder.jp | 本番同等構成           |
| 本番環境         | 実運用         | lawfinder.jp         | ユーザー利用           |

### 3.2 テストデータ

```yaml
TestData:
  Laws:
    - Type: 基本法令
      Count: 100
      Examples:
        - 民法
        - 刑法
        - 商法
        - 会社法

    - Type: 特殊ケース
      Count: 20
      Examples:
        - 長い法令名を持つ法令
        - 多数の条文を持つ法令（1000条以上）
        - 複雑な参照関係を持つ法令
        - 頻繁に改正される法令

    - Type: エッジケース
      Count: 10
      Examples:
        - 空の法令
        - 循環参照を持つ法令
        - 削除された条文への参照
        - 未施行の法令

  Users:
    - Role: 一般ユーザー
      Count: 10
    - Role: 管理者
      Count: 3
    - Role: 読み取り専用
      Count: 5
```

## 4. 機能テスト仕様

### 4.1 Phase 1: 静的サイト機能テスト

#### TC-P1-001: 法令検索機能

| 項目       | 内容                         |
| ---------- | ---------------------------- |
| テスト ID  | TC-P1-001                    |
| テスト項目 | 法令検索機能                 |
| 前提条件   | 法令データが読み込まれている |
| 優先度     | 高                           |

**テスト手順:**

1. ホーム画面の検索ボックスに「民法」と入力
2. Enter キーを押下または検索ボタンをクリック
3. 検索結果を確認

**期待結果:**

- 「民法」を含む法令が表示される
- 検索結果は関連度順にソートされている
- 各結果に法令名、法令番号、施行日が表示される

**テストデータ:**
| 検索キーワード | 期待結果数 | 備考 |
|---------------|------------|------|
| 民法 | 10 件以上 | 完全一致優先 |
| 第 94 条 | 50 件以上 | 条文番号検索 |
| あいうえお | 0 件 | 該当なし |
| " " (空白) | エラー表示 | 入力必須 |

#### TC-P1-002: 法令詳細表示

| 項目       | 内容                     |
| ---------- | ------------------------ |
| テスト ID  | TC-P1-002                |
| テスト項目 | 法令詳細表示             |
| 前提条件   | 法令一覧が表示されている |
| 優先度     | 高                       |

**テスト手順:**

1. 法令一覧から任意の法令をクリック
2. 法令詳細画面の表示を確認
3. 目次から任意の条文をクリック
4. 該当条文へのスクロールを確認

**期待結果:**

- 法令全文が正しく表示される
- 目次が階層的に表示される
- 目次クリックで該当箇所にスムーズスクロール
- パンくずリストが正しく表示される

#### TC-P1-003: 参照リンク機能

| 項目       | 内容                 |
| ---------- | -------------------- |
| テスト ID  | TC-P1-003            |
| テスト項目 | 参照リンク機能       |
| 前提条件   | 参照を含む法令を表示 |
| 優先度     | 高                   |

**テスト手順:**

1. 参照を含む条文を表示
2. 参照リンクをクリック
3. リンク先の表示を確認
4. ブラウザの戻るボタンで元の位置に戻る

**期待結果:**

- 参照リンクが青色で表示される
- クリックで参照先法令・条文が表示される
- 同一法令内はスクロール、他法令は新規タブ
- 戻るボタンで元の位置に正確に戻る

### 4.2 Phase 2: 法令改正支援システム機能テスト

#### TC-P2-001: ユーザー認証

| 項目       | 内容                     |
| ---------- | ------------------------ |
| テスト ID  | TC-P2-001                |
| テスト項目 | ログイン機能             |
| 前提条件   | テストユーザーが登録済み |
| 優先度     | 高                       |

**テスト手順:**

1. ログイン画面でメールアドレスとパスワードを入力
2. ログインボタンをクリック
3. ダッシュボード表示を確認

**期待結果:**

- 正しい認証情報でログイン成功
- 誤った認証情報でエラーメッセージ表示
- 3 回連続失敗でアカウントロック
- ログイン後、前回のページに遷移

**テストデータ:**
| メールアドレス | パスワード | 期待結果 |
|---------------|------------|----------|
| test@example.com | Test123! | ログイン成功 |
| test@example.com | wrong | エラー表示 |
| invalid@example.com | Test123! | エラー表示 |
| (空) | Test123! | バリデーションエラー |

#### TC-P2-002: ハネ改正検出

| 項目       | 内容                     |
| ---------- | ------------------------ |
| テスト ID  | TC-P2-002                |
| テスト項目 | 改正影響分析機能         |
| 前提条件   | 管理者権限でログイン済み |
| 優先度     | 高                       |

**テスト手順:**

1. 改正影響分析画面を開く
2. 改正対象法令として「民法」を選択
3. 改正対象条文として「第 94 条」を選択
4. 分析深度を「3」に設定
5. 「分析開始」ボタンをクリック
6. 分析結果を確認

**期待結果:**

- 5 秒以内に分析完了
- 影響を受ける法令・条文が一覧表示
- 影響度（高・中・低）が表示
- グラフで視覚的に表示
- CSV エクスポート可能

**検証項目:**

- [ ] 直接参照の検出
- [ ] 間接参照の検出（深度 3 まで）
- [ ] 準用関係の正確な把握
- [ ] 読み替え規定の考慮
- [ ] 循環参照の適切な処理

#### TC-P2-003: AI 参照解決

| 項目       | 内容             |
| ---------- | ---------------- |
| テスト ID  | TC-P2-003        |
| テスト項目 | AI 支援参照解決  |
| 前提条件   | 参照関係管理画面 |
| 優先度     | 中               |

**テスト手順:**

1. 未検証の参照関係一覧を表示
2. 任意の参照を選択
3. 「AI 検証実行」ボタンをクリック
4. AI 検証結果を確認
5. 必要に応じて手動修正
6. 「保存」ボタンをクリック

**期待結果:**

- AI 検証が 3 秒以内に完了
- 信頼度スコアが表示される（0-100%）
- 曖昧な参照に対する修正提案
- 手動修正が可能
- 検証履歴が記録される

## 5. 非機能テスト仕様

### 5.1 パフォーマンステスト

#### PT-001: ページ読み込み速度

| 項目       | 内容                     |
| ---------- | ------------------------ |
| テスト ID  | PT-001                   |
| テスト項目 | 初期ページ読み込み時間   |
| 測定対象   | ホーム画面、法令詳細画面 |
| 合格基準   | 3 秒以内                 |

**測定条件:**

- ネットワーク: 4G 相当（下り 20Mbps）
- デバイス: 中位スペックのスマートフォン
- キャッシュ: 無効状態

**測定項目:**
| メトリクス | 目標値 | 測定方法 |
|-----------|--------|----------|
| First Contentful Paint | < 1.5 秒 | Lighthouse |
| Largest Contentful Paint | < 2.5 秒 | Lighthouse |
| Time to Interactive | < 3.0 秒 | Lighthouse |
| Total Blocking Time | < 300ms | Lighthouse |

#### PT-002: 負荷テスト

| 項目       | 内容                                |
| ---------- | ----------------------------------- |
| テスト ID  | PT-002                              |
| テスト項目 | 同時アクセス処理能力                |
| 測定対象   | API エンドポイント                  |
| 合格基準   | 100 同時ユーザーで応答時間 1 秒以内 |

**シナリオ:**

```yaml
LoadTest:
  Tool: Apache JMeter
  Duration: 30 minutes

  Scenarios:
    - Name: 通常利用
      Users: 100
      RampUp: 5 minutes
      Actions:
        - Home page: 20%
        - Search: 30%
        - Law detail: 40%
        - Reference navigation: 10%

    - Name: ピーク時
      Users: 500
      RampUp: 10 minutes
      Actions:
        - Search heavy: 60%
        - Analysis: 40%

  Metrics:
    - Response time (avg, 95%, 99%)
    - Throughput (req/sec)
    - Error rate
    - CPU/Memory usage
```

### 5.2 セキュリティテスト

#### ST-001: 脆弱性スキャン

| 項目       | 内容                       |
| ---------- | -------------------------- |
| テスト ID  | ST-001                     |
| テスト項目 | Web アプリケーション脆弱性 |
| 対象       | 全画面・全 API             |
| ツール     | OWASP ZAP                  |

**テスト項目:**

- [ ] SQL インジェクション
- [ ] クロスサイトスクリプティング（XSS）
- [ ] クロスサイトリクエストフォージェリ（CSRF）
- [ ] 認証・認可の不備
- [ ] 機密情報の露出
- [ ] セキュリティ設定ミス
- [ ] 既知の脆弱性を持つコンポーネント
- [ ] 不適切なログ記録

#### ST-002: ペネトレーションテスト

| 項目       | 内容                   |
| ---------- | ---------------------- |
| テスト ID  | ST-002                 |
| テスト項目 | 侵入テスト             |
| 実施時期   | リリース前             |
| 実施者     | 外部セキュリティ専門家 |

**テストシナリオ:**

1. 認証回避の試行
2. 権限昇格の試行
3. データ改ざんの試行
4. サービス拒否攻撃
5. 情報漏洩の試行

### 5.3 ユーザビリティテスト

#### UT-001: タスク完了率

| 項目       | 内容                     |
| ---------- | ------------------------ |
| テスト ID  | UT-001                   |
| テスト項目 | 主要タスクの完了率       |
| 対象者     | 5 名の一般ユーザー       |
| 合格基準   | 80%以上が 3 分以内に完了 |

**テストタスク:**

1. 「民法第 94 条」を検索して表示
2. 条文から参照先法令に移動
3. 改正影響分析を実行
4. 分析結果を CSV でダウンロード

**評価項目:**

- タスク完了率
- 完了時間
- エラー発生回数
- ユーザー満足度（5 段階評価）

### 5.4 互換性テスト

#### CT-001: ブラウザ互換性

| 項目       | 内容               |
| ---------- | ------------------ |
| テスト ID  | CT-001             |
| テスト項目 | クロスブラウザ対応 |
| 対象       | 主要ブラウザ       |
| 合格基準   | 全機能が正常動作   |

**テスト対象:**
| ブラウザ | バージョン | OS | 優先度 |
|----------|------------|-----|--------|
| Chrome | 最新 2 バージョン | Windows/Mac | 高 |
| Firefox | 最新 2 バージョン | Windows/Mac | 高 |
| Safari | 最新 2 バージョン | Mac/iOS | 高 |
| Edge | 最新 2 バージョン | Windows | 中 |

**確認項目:**

- [ ] レイアウト崩れがない
- [ ] JavaScript エラーがない
- [ ] CSS 表示が正常
- [ ] 機能が全て動作する

## 6. テスト自動化

### 6.1 自動化フレームワーク

```javascript
// Jest + React Testing Library (単体テスト)
describe("SearchBox Component", () => {
  it("should display search results when query is entered", async () => {
    const { getByRole, getByText } = render(<SearchBox />);
    const input = getByRole("textbox");

    fireEvent.change(input, { target: { value: "民法" } });
    fireEvent.submit(input.closest("form"));

    await waitFor(() => {
      expect(getByText("民法")).toBeInTheDocument();
    });
  });

  it("should show error for empty query", () => {
    const { getByRole, getByText } = render(<SearchBox />);
    const form = getByRole("search");

    fireEvent.submit(form);

    expect(getByText("検索キーワードを入力してください")).toBeInTheDocument();
  });
});

// Cypress (E2Eテスト)
describe("Law Search Flow", () => {
  beforeEach(() => {
    cy.visit("/");
  });

  it("should search and navigate to law detail", () => {
    cy.get('[data-testid="search-input"]').type("民法{enter}");
    cy.get('[data-testid="search-results"]').should("be.visible");
    cy.contains("民法").first().click();
    cy.url().should("include", "/laws/");
    cy.get('[data-testid="law-title"]').should("contain", "民法");
  });

  it("should navigate through references", () => {
    cy.visit("/laws/civil-code");
    cy.get('[data-testid="article-94"]').scrollIntoView();
    cy.get('[data-testid="reference-link"]').first().click();
    cy.get('[data-testid="law-title"]').should("not.contain", "民法");
  });
});
```

### 6.2 CI/CD パイプライン統合

```yaml
# GitHub Actions
name: Test Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  unit-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: "18"
      - run: npm ci
      - run: npm run test:unit
      - run: npm run test:coverage
      - uses: codecov/codecov-action@v3

  integration-test:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: testpass
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    steps:
      - uses: actions/checkout@v3
      - run: npm ci
      - run: npm run test:integration

  e2e-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm ci
      - run: npm run build
      - run: npm run test:e2e

  performance-test:
    runs-on: ubuntu-latest
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v3
      - run: npm ci
      - run: npm run build
      - run: npm run test:lighthouse
      - uses: actions/upload-artifact@v3
        with:
          name: lighthouse-report
          path: lighthouse-report.html
```

## 7. テストデータ管理

### 7.1 テストデータ生成

```javascript
// テストデータファクトリー
class TestDataFactory {
  static createLaw(overrides = {}) {
    return {
      law_id: faker.random.alphaNumeric(20),
      law_type: faker.random.arrayElement(["Act", "CabinetOrder", "MinisterialOrdinance"]),
      law_num: `${faker.date.past().getFullYear()}年法律第${faker.datatype.number({ min: 1, max: 200 })}号`,
      law_title: faker.lorem.words(5),
      promulgate_date: faker.date.past(),
      enforce_date: faker.date.past(),
      ...overrides,
    };
  }

  static createArticle(lawId, overrides = {}) {
    return {
      article_id: `${lawId}_art${faker.datatype.number({ min: 1, max: 100 })}`,
      law_id: lawId,
      article_num: faker.datatype.number({ min: 1, max: 1000 }),
      content: faker.lorem.paragraphs(3),
      ...overrides,
    };
  }

  static createReference(sourceId, targetId, overrides = {}) {
    return {
      reference_id: faker.random.alphaNumeric(10),
      source_article_id: sourceId,
      target_article_id: targetId,
      reference_type: faker.random.arrayElement(["準用", "みなす", "読み替え"]),
      confidence_score: faker.datatype.float({ min: 0.5, max: 1.0 }),
      ...overrides,
    };
  }
}

// シードデータ生成
async function seedTestData() {
  // 基本法令データ
  const laws = Array.from({ length: 100 }, () => TestDataFactory.createLaw());

  // 各法令に条文を追加
  const articles = [];
  laws.forEach((law) => {
    const articleCount = faker.datatype.number({ min: 50, max: 200 });
    for (let i = 1; i <= articleCount; i++) {
      articles.push(
        TestDataFactory.createArticle(law.law_id, {
          article_num: i,
        })
      );
    }
  });

  // 参照関係を生成
  const references = [];
  articles.forEach((article) => {
    if (Math.random() > 0.7) {
      // 30%の条文に参照を追加
      const targetArticle = faker.random.arrayElement(articles);
      references.push(TestDataFactory.createReference(article.article_id, targetArticle.article_id));
    }
  });

  return { laws, articles, references };
}
```

### 7.2 テストデータのリセット

```sql
-- テストデータリセットスクリプト
BEGIN;

-- 既存データの削除
TRUNCATE TABLE references CASCADE;
TRUNCATE TABLE items CASCADE;
TRUNCATE TABLE paragraphs CASCADE;
TRUNCATE TABLE articles CASCADE;
TRUNCATE TABLE laws CASCADE;
TRUNCATE TABLE audit_logs CASCADE;

-- シーケンスのリセット
ALTER SEQUENCE audit_logs_log_id_seq RESTART WITH 1;

-- 基本データの投入
INSERT INTO laws (law_id, law_type, law_num, law_title, promulgate_date, enforce_date)
VALUES
  ('TEST001', 'Act', '明治29年法律第89号', 'テスト民法', '1896-04-27', '1896-04-27'),
  ('TEST002', 'Act', '明治32年法律第48号', 'テスト商法', '1899-03-09', '1899-06-16');

-- テスト用ユーザー
INSERT INTO users (email, name, role, organization)
VALUES
  ('admin@test.lawfinder.jp', 'テスト管理者', 'admin', 'テスト省庁'),
  ('user@test.lawfinder.jp', 'テストユーザー', 'viewer', 'テスト省庁');

COMMIT;
```

## 8. バグ管理

### 8.1 バグ分類

| 重要度   | 説明                     | 対応期限     |
| -------- | ------------------------ | ------------ |
| Critical | システム停止、データ損失 | 即時         |
| High     | 主要機能の不具合         | 24 時間以内  |
| Medium   | 副次機能の不具合         | 1 週間以内   |
| Low      | 軽微な表示崩れ等         | 次回リリース |

### 8.2 バグレポートテンプレート

```markdown
## バグレポート

**ID**: BUG-2025-001
**報告日**: 2025-08-03
**報告者**: QA チーム

### 概要

検索結果が表示されない

### 再現手順

1. ホーム画面を開く
2. 検索ボックスに「テスト」と入力
3. Enter キーを押下

### 期待動作

検索結果が表示される

### 実際の動作

「エラーが発生しました」と表示される

### 環境

- ブラウザ: Chrome 115
- OS: Windows 11
- 環境: テスト環境

### 添付

- スクリーンショット
- エラーログ

### 重要度

High

### 修正状況

- [ ] 未着手
- [ ] 調査中
- [ ] 修正中
- [ ] 修正完了
- [ ] テスト完了
- [ ] クローズ
```

## 9. テストレポート

### 9.1 テスト実施報告書テンプレート

```markdown
# テスト実施報告書

**プロジェクト**: LawFinder
**フェーズ**: Phase 1
**期間**: 2025-08-01 〜 2025-08-31
**バージョン**: v1.0.0

## サマリー

### テスト実施状況

- 計画数: 150 件
- 実施数: 145 件
- 合格数: 140 件
- 不合格数: 5 件
- 未実施: 5 件
- 合格率: 96.6%

### 品質指標

- バグ密度: 0.5 件/KLOC
- テストカバレッジ: 82%
- 重大バグ: 0 件

## 詳細結果

### 機能テスト

| 機能   | 計画 | 実施 | 合格 | 不合格 |
| ------ | ---- | ---- | ---- | ------ |
| 検索   | 30   | 30   | 29   | 1      |
| 表示   | 40   | 40   | 40   | 0      |
| リンク | 20   | 20   | 18   | 2      |

### 非機能テスト

| 項目       | 結果   | 基準      |
| ---------- | ------ | --------- |
| ページ読込 | 2.5 秒 | 3 秒以内  |
| 同時接続   | 150    | 100 以上  |
| 可用性     | 99.9%  | 99.5%以上 |

## 課題と対策

### 未解決バグ

1. BUG-001: 特定条件での検索エラー
   - 対策: 次回リリースで修正予定

### リスク

1. パフォーマンス劣化の可能性
   - 対策: 定期的な性能監視

## 判定

**リリース判定: 可**

条件付きリリース承認。
重大バグはなく、基本機能は正常動作。
```

## 10. 受入テスト

### 10.1 受入基準

| カテゴリ       | 基準                               | 必須/推奨 |
| -------------- | ---------------------------------- | --------- |
| 機能完成度     | 要件定義書の機能を 100%実装        | 必須      |
| 品質           | 重大バグ 0 件、中程度バグ 5 件以下 | 必須      |
| パフォーマンス | 全ての性能要件を満たす             | 必須      |
| セキュリティ   | 脆弱性診断で High リスク 0 件      | 必須      |
| ドキュメント   | ユーザーマニュアル完成             | 必須      |
| 教育           | 運用担当者への教育完了             | 推奨      |

### 10.2 受入テストシナリオ

#### シナリオ 1: 日常業務フロー

**前提**: 法務担当者としてログイン

1. **法令検索と閲覧**

   - 「個人情報保護法」を検索
   - 最新の改正内容を確認
   - 関連する施行令を参照

2. **改正影響分析**

   - 「民法第 94 条」の改正を想定
   - 影響分析を実行
   - 影響を受ける法令をリスト化
   - レポートを生成してダウンロード

3. **参照関係の確認**
   - 複雑な準用関係を持つ条文を選択
   - 参照マップを表示
   - 各参照先の内容を確認

**合格基準**:

- 全ての操作が直感的に実行可能
- エラーなく完了
- 処理時間が許容範囲内

#### シナリオ 2: 月次レポート作成

**前提**: 管理者としてログイン

1. **統計情報の収集**

   - アクセス統計を確認
   - よく検索される法令 TOP10
   - 改正頻度の高い法令一覧

2. **レポート生成**
   - 月次レポートテンプレートを選択
   - 期間を指定
   - PDF 形式でエクスポート

**合格基準**:

- 正確な統計情報
- 見やすいレポート形式
- 適切なファイルサイズ

## 11. テストツール

### 11.1 使用ツール一覧

| カテゴリ     | ツール         | 用途                 | ライセンス |
| ------------ | -------------- | -------------------- | ---------- |
| 単体テスト   | Jest           | JavaScript テスト    | MIT        |
| E2E テスト   | Cypress        | ブラウザ自動テスト   | MIT        |
| 負荷テスト   | Apache JMeter  | パフォーマンステスト | Apache 2.0 |
| セキュリティ | OWASP ZAP      | 脆弱性スキャン       | Apache 2.0 |
| カバレッジ   | Istanbul       | コードカバレッジ     | BSD        |
| CI/CD        | GitHub Actions | 自動テスト実行       | -          |

### 11.2 ツール設定

```json
// jest.config.js
module.exports = {
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.js'],
  collectCoverageFrom: [
    'src/**/*.{js,jsx,ts,tsx}',
    '!src/**/*.d.ts',
    '!src/index.js',
    '!src/serviceWorker.js'
  ],
  coverageThreshold: {
    global: {
      branches: 70,
      functions: 70,
      lines: 80,
      statements: 80
    }
  },
  transform: {
    '^.+\\.(js|jsx|ts|tsx)$': 'babel-jest'
  },
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1'
  }
};

// cypress.config.js
module.exports = {
  e2e: {
    baseUrl: 'http://localhost:5000',
    viewportWidth: 1280,
    viewportHeight: 720,
    video: true,
    screenshotOnRunFailure: true,
    defaultCommandTimeout: 10000,
    requestTimeout: 10000,
    responseTimeout: 10000
  }
};
```

## 12. 改訂履歴

| バージョン | 日付       | 変更内容 |
| ---------- | ---------- | -------- |
| 1.0        | 2025-08-03 | 初版作成 |

## 付録 A: テストケース一覧

※ 詳細なテストケース一覧は別紙「テストケース管理表.xlsx」を参照

## 付録 B: テスト環境構築手順

```bash
# 1. テスト環境の初期化
git clone https://github.com/lawfinder/lawfinder.git
cd lawfinder
npm install

# 2. テストデータの準備
npm run db:seed:test

# 3. テストの実行
# 単体テスト
npm run test:unit

# 統合テスト
npm run test:integration

# E2Eテスト
npm run test:e2e

# 全テスト実行
npm run test:all

# カバレッジレポート生成
npm run test:coverage
```
