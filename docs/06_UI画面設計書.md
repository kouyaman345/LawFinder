# UI画面設計書

## 1. デザインコンセプト

### 1.1 基本方針
- e-Gov法令検索サイトのデザインをベースに現代的にUIを改善
- アクセシビリティとユーザビリティを重視
- レスポンシブデザインでモバイル対応

### 1.2 カラースキーム
```css
:root {
  --primary: #003f8c;      /* e-Govブルー */
  --secondary: #0066cc;    /* リンクブルー */
  --success: #28a745;
  --warning: #ffc107;
  --danger: #dc3545;
  --light: #f8f9fa;
  --dark: #212529;
}
```

## 2. 画面構成

### 2.1 レイアウト構造
```
┌───────────────────────────────────────────────┐
│                 ヘッダー                      │
├─────────────┴──────────────────────────────────┤
│  サイドバー   │         メインコンテンツ            │
│  (目次)     │                                  │
│             │                                  │
└─────────────┴──────────────────────────────────┘
```

### 2.2 コンポーネント構成

#### ヘッダーコンポーネント
- ロゴ/システム名
- グローバル検索バー
- ユーザーメニュー（将来実装）

#### サイドバー（目次）
- 階層的目次表示
- 折りたたみ/展開機能
- 現在位置のハイライト

#### メインコンテンツ
- 法令本文表示
- 参照リンク
- パンくずリスト

## 3. 主要画面詳細

### 3.1 トップページ

#### 機能
- 法令検索
- 人気法令ランキング
- 最近の更新

#### UI要素
```tsx
<SearchBar placeholder="法令名・条文番号を入力" />
<QuickLinks>
  <Link href="/laws/129AC0000000089">民法</Link>
  <Link href="/laws/132AC0000000048">商法</Link>
  <Link href="/laws/417AC0000000086">会社法</Link>
</QuickLinks>
```

### 3.2 法令一覧画面

#### 機能
- 法令リスト表示
- フィルタリング
- ページネーション
- ソート機能

#### テーブル表示
```
┌─────────────┬────────────┬──────────┬────────┐
│ 法令名       │ 法令種別    │ 施行日     │ 状態    │
├─────────────┼────────────┼──────────┼────────┤
│ 民法         │ 法律        │ 1898/07/16 │ 現行    │
│ 商法         │ 法律        │ 1899/03/09 │ 現行    │
└─────────────┴────────────┴──────────┴────────┘
```

### 3.3 法令詳細画面

#### 機能
- 法令本文表示
- 階層的目次
- 参照リンクナビゲーション
- 参照統計表示

#### レイアウト
```tsx
<div className="law-detail">
  <header className="law-header">
    <h1>民法</h1>
    <div className="metadata">
      <span>法令番号: 129AC0000000089</span>
      <span>施行日: 1898年7月16日</span>
    </div>
  </header>
  
  <div className="law-body">
    <aside className="toc">
      <TableOfContents items={tocItems} />
    </aside>
    
    <main className="content">
      <LawContentView articles={articles} />
    </main>
    
    <aside className="references">
      <ReferenceStats stats={refStats} />
    </aside>
  </div>
</div>
```

### 3.4 参照リンク表示

#### インタラクション
- ホバーでプレビュー表示
- クリックで参照先へ遷移
- 参照タイプごとに色分け

#### スタイル
```css
.reference-link {
  color: #0066cc;
  text-decoration: underline;
  cursor: pointer;
  position: relative;
}

.reference-link:hover {
  background-color: #e8f4ff;
}

.reference-link.internal {
  border-bottom: 2px solid #28a745;
}

.reference-link.external {
  border-bottom: 2px solid #ffc107;
}
```

## 4. コンポーネント一覧

### 4.1 共通コンポーネント

| コンポーネント名 | 説明 | 実装状態 |
|--------------|------|----------|
| Header | ヘッダー | ✅ |
| SearchBar | 検索バー | ✅ |
| TableOfContents | 目次 | ✅ |
| Breadcrumb | パンくず | ✅ |
| Pagination | ページネーション | ✅ |

### 4.2 法令表示コンポーネント

| コンポーネント名 | 説明 | 実装状態 |
|--------------|------|----------|
| LawContentView | 法令本文表示 | ✅ |
| LawArticle | 条文表示 | ✅ |
| ReferenceLink | 参照リンク | ✅ |
| DeletedArticles | 削除条文表示 | ✅ |
| ReferenceStats | 参照統計 | 🔧 |

## 5. モバイル対応

### 5.1 レスポンシブデザイン
```css
/* モバイル */
@media (max-width: 768px) {
  .law-body {
    flex-direction: column;
  }
  
  .toc {
    position: sticky;
    top: 0;
    z-index: 100;
  }
}

/* タブレット */
@media (min-width: 769px) and (max-width: 1024px) {
  .law-body {
    grid-template-columns: 200px 1fr;
  }
}

/* デスクトップ */
@media (min-width: 1025px) {
  .law-body {
    grid-template-columns: 250px 1fr 200px;
  }
}
```

### 5.2 タッチ操作
- スワイプでサイドバー開閉
- タップで参照プレビュー
- ピンチズーム対応

## 6. アクセシビリティ

### 6.1 WCAG 2.1準拠
- コントラスト比 4.5:1以上
- キーボードナビゲーション対応
- スクリーンリーダー対応

### 6.2 アクセシビリティ機能
- 文字サイズ変更
- ハイコントラストモード
- フォーカスインジケーター

## 7. パフォーマンス最適化

### 7.1 表示速度
- 初期表示: 3秒以内
- ページ遷移: 1秒以内
- スクロール: 60fps

### 7.2 最適化手法
- 仮想スクロール
- 遅延読み込み
- 画像最適化
- CSS/JSバンドル最小化