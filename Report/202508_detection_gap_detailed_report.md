# e-Gov vs LawFinder 参照検出差異詳細レポート

生成日時: 2025 年 8 月 21 日

## エグゼクティブサマリー

e-Gov 法令検索サービスと LawFinder の参照検出能力を詳細に比較分析した結果、両システムには明確な特徴と補完関係があることが判明しました。

**主要な発見**：

- e-Gov のみが検出: **10 種類**の参照パターン（主に相対参照の解決と範囲参照）
- LawFinder のみが検出: **3 種類**の参照パターン（相対参照の元テキスト保持）
- 検出精度: LawFinder は現状**25%の精度**、**9.1%の再現率**

## 1. LawFinder が検出できていない参照（e-Gov のみ検出）

### 1.1 相対参照の完全解決

#### 問題パターン

```text
「前項」→「第X条第Y項」への変換
「前条」→「第X条」への変換
「前二項」→「第X条第Y項及び第Z項」への変換
```

#### 具体例

| 条文                             | e-Gov 検出結果              | LawFinder 検出結果 | 差異の原因               |
| -------------------------------- | --------------------------- | ------------------ | ------------------------ |
| 民法第 94 条「前項の規定による」 | 第 94 条第 1 項             | 未検出             | 項番号への解決未実装     |
| 会社法第 349 条「前項本文」      | 第 349 条第 1 項本文        | 未検出             | 「本文」修飾子の処理不足 |
| 民法第 717 条「前二項」          | 第 717 条第 1 項及び第 2 項 | 未検出             | 複数項の範囲解決未対応   |

#### 技術的課題

```typescript
// 現在のLawFinderの実装
detectRelativeReference(text: "前項") {
  return { type: "relative", target: "前項" }  // 未解決のまま
}

// 必要な実装
resolveRelativeReference(text: "前項", context: ArticleContext) {
  const currentParagraph = context.currentParagraph;
  return {
    type: "relative",
    target: `第${context.articleNum}条第${currentParagraph - 1}項`,
    resolved: true
  }
}
```

### 1.2 漢数字の大きな数値処理

#### 問題パターン

```text
「第七百五十八条」のような3桁以上の漢数字
「第二百七十五条」のような複合漢数字
```

#### 具体例

| 条文               | 参照テキスト   | e-Gov     | LawFinder | 問題             |
| ------------------ | -------------- | --------- | --------- | ---------------- |
| 民法第 570 条      | 第五百六十六条 | 第 566 条 | 未検出    | 漢数字パース失敗 |
| 民事訴訟法第 89 条 | 第二百七十五条 | 第 275 条 | 未検出    | 複合漢数字エラー |

### 1.3 範囲参照の処理

#### 問題パターン

```text
「第X条から第Y条まで」
「第X号から第Y号まで」
```

#### 具体例

| 条文               | 参照テキスト                     | e-Gov                    | LawFinder | 問題           |
| ------------------ | -------------------------------- | ------------------------ | --------- | -------------- |
| 労働基準法第 36 条 | 第三十二条から第三十二条の五まで | 第 32 条-第 32 条の 5    | 未検出    | 範囲展開未実装 |
| 会社法第 447 条    | 第四号から第六号まで             | 第 447 条第 4 号-第 6 号 | 未検出    | 号の範囲未対応 |

### 1.4 検出失敗の統計

```json
{
  "総未検出数": 10,
  "カテゴリ別": {
    "相対参照の未解決": 4, // 40%
    "漢数字処理エラー": 3, // 30%
    "範囲参照の未展開": 2, // 20%
    "複合参照の未分解": 1 // 10%
  }
}
```

## 2. LawFinder のみが検出できる参照

### 2.1 相対参照の元テキスト保持

#### 特徴

LawFinder は相対参照を検出はするが、解決せずに元のテキストを保持している

#### 具体例

| 条文                    | LawFinder 検出   | e-Gov                  | 利点           |
| ----------------------- | ---------------- | ---------------------- | -------------- |
| 民法第 94 条「前項」    | "前項"として保持 | 第 94 条第 1 項に解決  | 元の表現を保持 |
| 会社法第 349 条「前項」 | "前項"として保持 | 第 349 条第 4 項に解決 | 文脈情報を維持 |

#### 潜在的優位性

```typescript
// LawFinderの approach
{
  originalText: "前項",
  type: "relative",
  confidence: 0.85,
  needsResolution: true
}

// この情報により：
// 1. 元の法令テキストの忠実な保持
// 2. 後処理での柔軟な解決が可能
// 3. 学習データとしての活用
```

### 2.2 暗黙的参照の可能性（将来的な強み）

現在は未実装だが、LLM 統合により以下が可能になる：

1. **文脈依存の参照**

   - 「この法律の規定」→ 現在の法令全体への参照
   - 「関係法令」→ 関連する複数法令への参照

2. **概念的参照**
   - 「民法の原則」→ 民法第 1 条等への参照
   - 「憲法上の権利」→ 日本国憲法の関連条文

## 3. 改善提案

### 3.1 短期的改善（1-2 週間）

#### 優先度 1: 相対参照の解決

```typescript
class RelativeReferenceResolver {
  resolve(relativeRef: string, context: ArticleContext): ResolvedReference {
    switch (relativeRef) {
      case "前項":
        return this.resolvePreviousParagraph(context);
      case "前条":
        return this.resolvePreviousArticle(context);
      case "次項":
        return this.resolveNextParagraph(context);
      // ... 他のパターン
    }
  }
}
```

#### 優先度 2: 漢数字パーサーの強化

```typescript
function parseComplexKanjiNumber(text: string): number {
  // 百、千の位を正確に処理
  const patterns = {
    千: 1000,
    百: 100,
    十: 10,
  };
  // 実装...
}
```

### 3.2 中期的改善（1-2 ヶ月）

#### 範囲参照の展開

```typescript
class RangeReferenceExpander {
  expand(rangeText: string): Article[] {
    // "第1条から第3条まで" → [第1条, 第2条, 第3条]
    const [start, end] = this.parseRange(rangeText);
    return this.generateArticleRange(start, end);
  }
}
```

#### 構造的参照の理解

- 「本文」「ただし書」「各号」等の構造要素
- 項・号・イロハの階層構造

### 3.3 長期的改善（3-6 ヶ月）

#### AI 強化による暗黙的参照

- GPT-4o による文脈理解
- 法的概念の自動マッピング
- 判例・通達との関連付け

## 4. 比較表サマリー

### 4.1 検出能力の詳細比較

| 機能               | e-Gov       | LawFinder（現在） | LawFinder（改善後） |
| ------------------ | ----------- | ----------------- | ------------------- |
| **相対参照の解決** | ✅ 完全対応 | ❌ 未解決         | ✅ 実装予定         |
| **漢数字処理**     | ✅ 全範囲   | ⚠️ 2 桁まで       | ✅ 改善予定         |
| **範囲参照**       | ✅ 展開済み | ❌ 未対応         | ✅ 実装予定         |
| **構造的参照**     | ✅ 対応     | ⚠️ 部分的         | ✅ 改善予定         |
| **元テキスト保持** | ❌ なし     | ✅ あり           | ✅ 維持             |
| **暗黙的参照**     | ❌ なし     | ❌ なし           | ✅ LLM 統合         |
| **自動更新**       | ❌ 手動     | ✅ 自動           | ✅ 自動             |

### 4.2 精度メトリクス

| 指標              | e-Gov  | LawFinder（現在） | 目標値 |
| ----------------- | ------ | ----------------- | ------ |
| 精度（Precision） | 100%   | 25.0%             | 95%    |
| 再現率（Recall）  | 100%\* | 9.1%              | 95%    |
| F1 スコア         | 100%\* | 13.3%             | 95%    |

\*e-Gov は手動タグ付けされた範囲内での精度

## 5. 技術的インサイト

### 5.1 e-Gov の強み

1. **完全な相対参照解決**: すべての相対参照を実際の条文番号に変換
2. **構造的理解**: 法令の階層構造を完全に理解
3. **人的検証**: 専門家による確認済み

### 5.2 LawFinder の潜在的強み

1. **拡張性**: 新しいパターンへの迅速な対応
2. **自動化**: 大規模処理と継続的更新
3. **学習能力**: データ蓄積による精度向上
4. **メタデータ**: 信頼度スコアや元テキスト情報

## 6. 結論と今後の方向性

### 現状の課題

- **相対参照の未解決**: e-Gov との最大の差異
- **漢数字処理の不完全性**: 大きな数値で失敗
- **範囲参照の未対応**: 複雑な参照パターンの見逃し

### 改善による期待効果

1. **短期（2 週間）**: 精度 50%、再現率 40%達成
2. **中期（2 ヶ月）**: 精度 80%、再現率 75%達成
3. **長期（6 ヶ月）**: 精度 95%、再現率 95%達成 + 暗黙的参照対応

### 最終目標

e-Gov の精度を維持しつつ、以下の付加価値を提供：

- 🚀 **完全自動化**による即時更新
- 🧠 **AI 統合**による暗黙的参照の検出
- 📊 **メタデータ**による高度な分析
- 🔄 **継続的改善**による精度向上

---

_レポート作成: LawFinder 開発チーム_
_分析実施日: 2025 年 8 月 21 日_
