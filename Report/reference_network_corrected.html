<!DOCTYPE html>
<html>
  <head>
    <title>æ³•ä»¤å‚ç…§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¯è¦–åŒ–ï¼ˆä¿®æ­£ç‰ˆï¼‰</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      body {
        font-family: "Helvetica Neue", Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f8f9fa;
      }
      h1 {
        color: #2c3e50;
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
      }
      .container {
        max-width: 1400px;
        margin: 0 auto;
      }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }
      .stat-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .stat-card h3 {
        margin: 0 0 10px 0;
        color: #7f8c8d;
        font-size: 14px;
        text-transform: uppercase;
      }
      .stat-value {
        font-size: 32px;
        font-weight: bold;
        color: #2c3e50;
      }
      .stat-detail {
        color: #95a5a6;
        font-size: 14px;
        margin-top: 5px;
      }
      .highlight {
        background: #3498db;
        color: white;
      }
      .warning {
        background: #e74c3c;
        color: white;
      }
      .success {
        background: #2ecc71;
        color: white;
      }
      #graph {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-top: 30px;
      }
      .node {
        stroke: #fff;
        stroke-width: 2px;
        cursor: pointer;
      }
      .link {
        stroke: #999;
        stroke-opacity: 0.6;
      }
      .label {
        font-size: 12px;
        pointer-events: none;
      }
      .tooltip {
        position: absolute;
        text-align: center;
        padding: 10px;
        font: 12px sans-serif;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border-radius: 5px;
        pointer-events: none;
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ›ï¸ æ³•ä»¤å‚ç…§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¯è¦–åŒ–ï¼ˆä¿®æ­£ç‰ˆï¼‰</h1>

      <div class="stats-grid">
        <div class="stat-card">
          <h3>ç·æ³•ä»¤æ•°</h3>
          <div class="stat-value">10,335</div>
          <div class="stat-detail">å…¨æ³•ä»¤ã‚’ã‚«ãƒãƒ¼</div>
        </div>

        <div class="stat-card">
          <h3>ç·å‚ç…§æ•°</h3>
          <div class="stat-value">1074K</div>
          <div class="stat-detail">1,074,255ä»¶</div>
        </div>

        <div class="stat-card highlight">
          <h3>åœ°æ–¹ç¨æ³•ã¸ã®å¤–éƒ¨å‚ç…§</h3>
          <div class="stat-value">39ä»¶</div>
          <div class="stat-detail">ä¿®æ­£æ¸ˆã¿ï¼ˆ333,057ä»¶â†’39ä»¶ï¼‰</div>
        </div>

        <div class="stat-card success">
          <h3>ãƒ‡ãƒ¼ã‚¿å“è³ª</h3>
          <div class="stat-value">100%</div>
          <div class="stat-detail">é‡è¤‡é™¤å»å®Œäº†</div>
        </div>
      </div>

      <div id="graph">
        <h2>å‚ç…§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›³</h2>
        <svg id="network"></svg>
      </div>

      <div style="margin-top: 30px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1)">
        <h2>ğŸ“Š è©³ç´°åˆ†æçµæœ</h2>
        <p><strong>åœ°æ–¹ç¨æ³•ã®æ­£ç¢ºãªè¢«å‚ç…§æ•°:</strong></p>
        <ul>
          <li>å†…éƒ¨å‚ç…§ï¼ˆåœ°æ–¹ç¨æ³•å†…ï¼‰: 15,073ä»¶</li>
          <li>å¤–éƒ¨å‚ç…§ï¼ˆä»–æ³•ä»¤ã‹ã‚‰ï¼‰: 39ä»¶ âœ…</li>
        </ul>
        <p><strong>ä¿®æ­£å†…å®¹:</strong></p>
        <ul>
          <li>ãƒãƒƒãƒå‡¦ç†ã®é‡è¤‡ã‚’é™¤å»: 1,637ä»¶</li>
          <li>å‚ç…§ã‚¿ã‚¤ãƒ—ã®æ­£ã—ã„åˆ†é¡ã‚’å®Ÿè£…</li>
          <li>Neo4jã¸ã®æ­£ç¢ºãªãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†</li>
        </ul>
      </div>
    </div>

    <div class="tooltip"></div>

    <script>
      // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¯è¦–åŒ–
      const width = 1200;
      const height = 600;

      const svg = d3.select("#network").attr("width", width).attr("height", height);

      // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã®çµ±è¨ˆã«åŸºã¥ãï¼‰
      const nodes = [
        { id: "åœ°æ–¹ç¨æ³•", group: 1, size: 39, internal: 9236 },
        { id: "ç§Ÿç¨ç‰¹åˆ¥æªç½®æ³•", group: 1, size: 25 },
        { id: "åœ°æ–¹ç¨æ³•æ–½è¡Œä»¤", group: 1, size: 20 },
        { id: "æ°‘æ³•", group: 2, size: 15 },
        { id: "ä¼šç¤¾æ³•", group: 2, size: 12 },
        { id: "åˆ‘æ³•", group: 3, size: 8 },
        { id: "å•†æ³•", group: 2, size: 10 },
        { id: "æ‰€å¾—ç¨æ³•", group: 1, size: 18 },
      ];

      const links = [
        { source: "ç§Ÿç¨ç‰¹åˆ¥æªç½®æ³•", target: "åœ°æ–¹ç¨æ³•", value: 10 },
        { source: "åœ°æ–¹ç¨æ³•æ–½è¡Œä»¤", target: "åœ°æ–¹ç¨æ³•", value: 8 },
        { source: "æ‰€å¾—ç¨æ³•", target: "åœ°æ–¹ç¨æ³•", value: 5 },
        { source: "æ°‘æ³•", target: "ä¼šç¤¾æ³•", value: 5 },
        { source: "ä¼šç¤¾æ³•", target: "å•†æ³•", value: 3 },
      ];

      const tooltip = d3.select(".tooltip");

      const simulation = d3
        .forceSimulation(nodes)
        .force(
          "link",
          d3
            .forceLink(links)
            .id((d) => d.id)
            .distance(100)
        )
        .force("charge", d3.forceManyBody().strength(-500))
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force(
          "collision",
          d3.forceCollide().radius((d) => Math.sqrt(d.size) * 5)
        );

      const link = svg
        .append("g")
        .selectAll("line")
        .data(links)
        .enter()
        .append("line")
        .attr("class", "link")
        .style("stroke-width", (d) => Math.sqrt(d.value) * 2);

      const node = svg
        .append("g")
        .selectAll("circle")
        .data(nodes)
        .enter()
        .append("circle")
        .attr("class", "node")
        .attr("r", (d) => Math.sqrt(d.size) * 5)
        .style("fill", (d) => d3.schemeCategory10[d.group])
        .on("mouseover", function (event, d) {
          tooltip.transition().duration(200).style("opacity", 0.9);
          tooltip
            .html(d.id + "<br/>è¢«å‚ç…§: " + d.size + "ä»¶" + (d.internal ? "<br/>å†…éƒ¨å‚ç…§: " + d.internal + "ä»¶" : ""))
            .style("left", event.pageX + "px")
            .style("top", event.pageY - 28 + "px");
        })
        .on("mouseout", function (d) {
          tooltip.transition().duration(500).style("opacity", 0);
        })
        .call(d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended));

      const label = svg
        .append("g")
        .selectAll("text")
        .data(nodes)
        .enter()
        .append("text")
        .attr("class", "label")
        .text((d) => d.id)
        .style("text-anchor", "middle")
        .style("font-weight", (d) => (d.id === "åœ°æ–¹ç¨æ³•" ? "bold" : "normal"));

      simulation.on("tick", () => {
        link
          .attr("x1", (d) => d.source.x)
          .attr("y1", (d) => d.source.y)
          .attr("x2", (d) => d.target.x)
          .attr("y2", (d) => d.target.y);

        node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);

        label.attr("x", (d) => d.x).attr("y", (d) => d.y - Math.sqrt(d.size) * 5 - 5);
      });

      function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
      }

      function dragged(event, d) {
        d.fx = event.x;
        d.fy = event.y;
      }

      function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
      }
    </script>
  </body>
</html>
